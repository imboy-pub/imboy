
# æ¶ˆæ¯ç»“æ„ä½“
```
Msg = {"id":ID, "status":Status, "type":Type, "from":From, "to":To, "payload": Payload, "server_ts": ServerTs}
```

# Msg.id
Xid().toString()


# Msg.Type
## å•èŠï¼ˆc2c[any()]ï¼‰
* Msg.Type = <<"c2c">>

## ç¾¤èŠ(c2g[any()])

## æ¨é€(S2C)
* Payload.msg_type = 706 éœ€è¦é‡æ–°ç™»å½•, Payload.content = ""
* Payload.msg_type = 786 åœ¨å…¶ä»–è®¾å¤‡ç™»å½•äº†, Payload.content = ""
* Payload.msg_type = 1019 ç”¨æˆ·åœ¨çº¿çŠ¶æ€å˜æ›´, Payload.content = ""
* Payload.msg_type = apply_as_a_friend æ·»åŠ å¥½å‹ç”³è¯·, Payload.content = ""

apply_as_a_friend
```
{"from":{"source":"qrcode","msg":"æˆ‘æ˜¯ nick leeyiğŸ‘ğŸ»ğŸ‘ğŸ»å°±","remark":"leeyi101","role":"all","donotlookhim":false,"donotlethimlook":true},"to":{},"msg_type":"custom","custom_type":"apply_as_a_friend"}
```

## å®¢æˆ·ç«¯ç¡®è®¤æ¶ˆæ¯ CLIENT_ACK
```
% å®¢æˆ·ç«¯ç¡®è®¤æ¶ˆæ¯
websocket_handle({text, <<"CLIENT_ACK", Tail/binary>>}, State) ->
    [Type, MsgId, DID] = binary:split(Tail, <<",">>, [global]),
    ?LOG(["CLIENT_ACK", Tail]),
    CurrentUid = proplists:get_value(current_uid, State),
    case Type of
        <<"C2C">> ->
            websocket_logic:c2c_client_ack(MsgId, CurrentUid, DID),
            {ok, State, hibernate};
        <<"S2C">> ->
            websocket_logic:s2c_client_ack(MsgId, CurrentUid, DID),
            {ok, State, hibernate}
    end;
```

# ServerTs
æœåŠ¡å™¨çš„å½“å‰æ¯«ç§’æ—¶é—´æˆ³
```
 Ts = util_dt:milliseconds(),
```
